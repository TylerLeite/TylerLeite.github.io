<!DOCTYPE html >
<html lang="en">
<head>
	<meta charset="UTF-8">
	<link href='https://fonts.googleapis.com/css?family=Nunito' rel='stylesheet' type='text/css'>
	<link href='https://fonts.googleapis.com/css?family=Asap' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" href="./style/style.css">

	<link rel="icon" type="image/png" href="./img/favicon.png">

	<script src="./js/lib/jquery.js"></script>
</head>

<body class="body">
<div class="wrapper">
	<div id="header" class="header">
		<a target="_blank" href=""><img src="./img/logo.png" width="32px" height="32px" class="logo"></a>
		<nav id="nav" class="nav noselect"><ul>
			<li class="navEl"><a href="">Home</a></li>
			<li class="navEl"><a href="">Contact</a></li>
			<li class="navEl"><a href="">About</a></li>
			<li class="navEl"><a href="">Calendar</a></li>
			<li class="navEl"><a href="">Buy tickets</a></li>
		</ul></nav>
	</div>

	<div id="spotLight">This is a div that is spotlighted!!!!</div>

</div>

<script>
function SpotLight(element) {
  this.element = element;
  this.x = element.width() / 2;
  this.y = element.height() / 2;
  this.show = function() {
    element.hide();
    element.removeClass("hide");
    return element.fadeIn('fast');
  };
  this.hide = function(callback) {
    element.fadeOut('fast', function() {
      if (callback) {
        return callback();
      }
    });
    return element.addClass("hide");
  };
  this.move = function(opts) {
    var endX, endY, obj;
    obj = $.extend({}, {
      start_x: this.x,
      start_y: this.y,
      x: this.x,
      y: this.y,
      aperture: "50%",
      duration: 1000,
      done: function() {}
    }, opts);
    endX = obj.x;
    endY = obj.y;
    obj.x = obj.start_x;
    obj.y = obj.start_y;
    return jQuery(obj).animate({
      x: endX,
      y: endY
    }, {
      duration: obj.duration,
      step: function() {
        var style, _i, _len, _ref;
        _ref = ["-moz-radial-gradient(" + this.x + "px " + this.y + "px, ellipse cover,  rgba(0,0,0,0) 0%, rgba(0,0,0,0.8) " + this.aperture + ", rgba(0,0,0,0.8) 100%)", "-webkit-gradient(radial, " + this.x + "px " + this.y + "px, 0px, " + this.x + "px " + this.y + "px, 100%, color-stop(0%,rgba(0,0,0,0)), color-stop(" + this.aperture + ",rgba(0,0,0,0.8)), color-stop(100%,rgba(0,0,0,0.8)))", "-webkit-radial-gradient(" + this.x + "px " + this.y + "px, ellipse cover,  rgba(0,0,0,0) 0%,rgba(0,0,0,0.8) " + this.aperture + ",rgba(0,0,0,0.8) 100%)", "-o-radial-gradient(" + this.x + "px " + this.y + "px, ellipse cover,  rgba(0,0,0,0) 0%,rgba(0,0,0,0.8) " + this.aperture + ",rgba(0,0,0,0.8) 100%)", "-ms-radial-gradient(" + this.x + "px " + this.y + "px, ellipse cover,  rgba(0,0,0,0) 0%,rgba(0,0,0,0.8) " + this.aperture + ",rgba(0,0,0,0.8) 100%)", "radial-gradient(ellipse at " + this.x + "px " + this.y + "px,  rgba(0,0,0,0) 0%,rgba(0,0,0,0.8) " + this.aperture + ",rgba(0,0,0,0.8) 100%)"];
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          style = _ref[_i];
          element.css({
            "background": style
          });
        }
        return true;
      },
      done: obj.done
    });
  };
  return this;
}

// Example Usage:
var spotLight = new SpotLight($("#spotLight"))
spotLight.show();
spotLight.move({ x: 150, y: 650 });

</script>
</body>
</html>
